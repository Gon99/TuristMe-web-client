<!DOCTYPE html>
<html>
<head>
	<title>Peticion Jquery</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

	<!--<style>
		#contenedor {
			background: lavender;
			height: 400px;
			width: 400px;
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
		}

		td {
			padding: 5px 5px;
			font-family: 'Calibri';
			border-bottom: 1px solid white;
			text-align: center;
		}

	</style>-->
	
</head>
<body>

	<h1>Admin panel</h1>
	<table class="table">
		<thead>
			<tr><th>Name</th><th>Email</th></tr>
		</thead>
		<tbody id="tBody"></tbody>
	</table>
	<button onclick="usersList();">Users</button>

</body>

<script>
	
		function usersList() {

			$.ajax({

				url: 'http://localhost:8888/turistme/public/index.php/api/user',

			 	type: 'GET',

			 	dataType:'json',

			 	beforeSend: function(request) {
			 		request.setRequestHeader('Authorization', sessionStorage.getItem("token"));
			 	},

				success : function(data) {
					console.log(data);
					var trHTML='';

						for (var i = 0; i<data.length; i ++) {
							trHTML=trHTML+'<tr><td>'+data[i].name+'</td><td>'+data[i].email+'</td></tr>';
						}
						$('#tBody').append(trHTML);
			 		//console.log(data);
			 	},

			 	error : function (xhr, status) {
			 		console.log('Error getting users');
			 	},

			 	complete : function(xhr, status) {
					console.log('Petition complete');
			 	}
			
			 });
		}

	</script>

</html>
